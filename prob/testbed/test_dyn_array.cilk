#include "par_dyn_array_generic.cilk"
#define TEST_SIZE 3000
#define TEST_CYCLES 3

cilk int main()
{
	dyn_array* test_array = create_array("short");
	short input[TEST_SIZE];
	int i;
	
	
	for(i=0; i<TEST_SIZE; ++i)
	{
		input[i] = i;
	}
	
	
	for(i=0; i<TEST_CYCLES; ++i)
	{		
		spawn batch_push_back(test_array, input, TEST_SIZE);
		sync;
		//print_array(test_array);
	}
	
	delete_array(test_array);
	return 0;
}